<!DOCTYPE html>

<html>

  <head>
    <title>cytoscape-dagre.js demo</title>

    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <style>
      body { font-family: helvetica; font-size: 14px; }
      #cy { width: 100%; height: 100%; position: absolute; left: 0; top: 0; z-index: 999; }
      h1 { opacity: 0.5; font-size: 1em; }
    </style>

    <!-- import maps help the browser where to find non-paths such as "@babel/cli" or "cytoscape" -->
    <script type="importmap">
      {
        "imports": {
          "cytoscape":        "https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.esm.min.js",
          "cytoscape-dagre":  "./mjs-src/index.js",
          "@dagrejs/dagre": "../dagre/mjs-lib/index.js",
          "@dagrejs/graphlib": "../graphlib/mjs-lib/index.js"
        }
      }
    </script>

    <script>
      console.log("ESM imports are very strict with CORS, they will not allow running locally without setting " +
      "special settings on your browser. Furthermore, if you use a CDN to retreive the packages, it must explicitly " +
      "set the text/javascript mimetype. As of 2024-02-02, unpkg does not.");
    </script>

    <!-- We bundle our ESM modules so its dependencies are included.
      If you had a pure-esm dependency tree, you can import without bundle as long
      as the browser knows where to find each dependency! -->

    <script type="module">
      import { default as cytoscape } from "cytoscape";
      import { default as dagre } from "cytoscape-dagre";

      window.addEventListener('DOMContentLoaded', function(){
        cytoscape.use(dagre); // Notice this is explicitly called with ESM-style, just like nodejs.
        var cy = window.cy = cytoscape({
          container: document.getElementById('cy'),

          boxSelectionEnabled: false,
          autounselectify: true,

          layout: {
            name: 'dagre'
          },

          style: [
            {
              selector: 'node',
              style: {
                'background-color': '#11479e'
              }
            },

            {
              selector: 'edge',
              style: {
                'width': 4,
                'target-arrow-shape': 'triangle',
                'line-color': '#9dbaea',
                'target-arrow-color': '#9dbaea',
                'curve-style': 'bezier'
              }
            }
          ],

          elements: {
            nodes: [
              { data: { id: 'n0' } },
              { data: { id: 'n1' } },
              { data: { id: 'n2' } },
              { data: { id: 'n3' } },
              { data: { id: 'n4' } },
              { data: { id: 'n5' } },
              { data: { id: 'n6' } },
              { data: { id: 'n7' } },
              { data: { id: 'n8' } },
              { data: { id: 'n9' } },
              { data: { id: 'n10' } },
              { data: { id: 'n11' } },
              { data: { id: 'n12' } },
              { data: { id: 'n13' } },
              { data: { id: 'n14' } },
              { data: { id: 'n15' } },
              { data: { id: 'n16' } }
            ],
            edges: [
              { data: { source: 'n0', target: 'n1' } },
              { data: { source: 'n1', target: 'n2' } },
              { data: { source: 'n1', target: 'n3' } },
              { data: { source: 'n4', target: 'n5' } },
              { data: { source: 'n4', target: 'n6' } },
              { data: { source: 'n6', target: 'n7' } },
              { data: { source: 'n6', target: 'n8' } },
              { data: { source: 'n8', target: 'n9' } },
              { data: { source: 'n8', target: 'n10' } },
              { data: { source: 'n11', target: 'n12' } },
              { data: { source: 'n12', target: 'n13' } },
              { data: { source: 'n13', target: 'n14' } },
              { data: { source: 'n13', target: 'n15' } },
            ]
          }
        });

      });
    </script>
  </head>

  <body>
    <h1>cytoscape-dagre demo (warning: check console log, CORS is strict in ESM mode)</h1>

    <div id="cy"></div>

  </body>

</html>
