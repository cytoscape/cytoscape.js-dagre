var e={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(e){return 1},edgeWeight:function(e){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(e,t){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(e,t){return t},ready:function(){},sort:void 0,stop:function(){}};let t=null!=Object.assign?Object.assign.bind(Object):function(e,...t){return t.forEach((t=>{Object.keys(t).forEach((r=>e[r]=t[r]))})),e};var r="\0",n="\0",o="";function i(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function s(e,t,n,i){var a=""+t,s=""+n;if(!e&&a>s){var d=a;a=s,s=d}return a+o+s+o+(void 0===i?r:i)}function d(e,t){return s(e,t.v,t.w,t.name)}var h=class{#e=!0;#t=!1;#r=!1;#n;#o=()=>{};#i=()=>{};#a={};#s={};#d={};#h={};#u={};#c={};#l={};#f=0;#g=0;#p;#v;constructor(e){e&&(this.#e=!e.hasOwnProperty("directed")||e.directed,this.#t=!!e.hasOwnProperty("multigraph")&&e.multigraph,this.#r=!!e.hasOwnProperty("compound")&&e.compound),this.#r&&(this.#p={},this.#v={},this.#v[n]={})}isDirected(){return this.#e}isMultigraph(){return this.#t}isCompound(){return this.#r}setGraph(e){return this.#n=e,this}graph(){return this.#n}setDefaultNodeLabel(e){return this.#o=e,"function"!=typeof e&&(this.#o=()=>e),this}nodeCount(){return this.#f}nodes(){return Object.keys(this.#a)}sources(){var e=this;return this.nodes().filter((t=>0===Object.keys(e.#s[t]).length))}sinks(){var e=this;return this.nodes().filter((t=>0===Object.keys(e.#h[t]).length))}setNodes(e,t){var r=arguments,n=this;return e.forEach((function(e){r.length>1?n.setNode(e,t):n.setNode(e)})),this}setNode(e,t){return this.#a.hasOwnProperty(e)?(arguments.length>1&&(this.#a[e]=t),this):(this.#a[e]=arguments.length>1?t:this.#o(e),this.#r&&(this.#p[e]=n,this.#v[e]={},this.#v[n][e]=!0),this.#s[e]={},this.#d[e]={},this.#h[e]={},this.#u[e]={},++this.#f,this)}node(e){return this.#a[e]}hasNode(e){return this.#a.hasOwnProperty(e)}removeNode(e){var t=this;if(this.#a.hasOwnProperty(e)){var r=e=>t.removeEdge(t.#c[e]);delete this.#a[e],this.#r&&(this.#m(e),delete this.#p[e],this.children(e).forEach((function(e){t.setParent(e)})),delete this.#v[e]),Object.keys(this.#s[e]).forEach(r),delete this.#s[e],delete this.#d[e],Object.keys(this.#h[e]).forEach(r),delete this.#h[e],delete this.#u[e],--this.#f}return this}setParent(e,t){if(!this.#r)throw new Error("Cannot set parent in a non-compound graph");if(void 0===t)t=n;else{for(var r=t+="";void 0!==r;r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this.#m(e),this.#p[e]=t,this.#v[t][e]=!0,this}#m(e){delete this.#v[this.#p[e]][e]}parent(e){if(this.#r){var t=this.#p[e];if(t!==n)return t}}children(e=n){if(this.#r){var t=this.#v[e];if(t)return Object.keys(t)}else{if(e===n)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this.#d[e];if(t)return Object.keys(t)}successors(e){var t=this.#u[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){const n=new Set(t);for(var r of this.successors(e))n.add(r);return Array.from(n.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this.#e,multigraph:this.#t,compound:this.#r});t.setGraph(this.graph());var r=this;Object.entries(this.#a).forEach((function([r,n]){e(r)&&t.setNode(r,n)})),Object.values(this.#c).forEach((function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))}));var n={};function o(e){var i=r.parent(e);return void 0===i||t.hasNode(i)?(n[e]=i,i):i in n?n[i]:o(i)}return this.#r&&t.nodes().forEach((e=>t.setParent(e,o(e)))),t}setDefaultEdgeLabel(e){return this.#i=e,"function"!=typeof e&&(this.#i=()=>e),this}edgeCount(){return this.#g}edges(){return Object.values(this.#c)}setPath(e,t){var r=this,n=arguments;return e.reduce((function(e,o){return n.length>1?r.setEdge(e,o,t):r.setEdge(e,o),o})),this}setEdge(){var e,t,r,n,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(e=a.v,t=a.w,r=a.name,2===arguments.length&&(n=arguments[1],o=!0)):(e=a,t=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],o=!0)),e=""+e,t=""+t,void 0!==r&&(r=""+r);var d=s(this.#e,e,t,r);if(this.#l.hasOwnProperty(d))return o&&(this.#l[d]=n),this;if(void 0!==r&&!this.#t)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this.#l[d]=o?n:this.#i(e,t,r);var h=function(e,t,r,n){var o=""+t,i=""+r;if(!e&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};n&&(s.name=n);return s}(this.#e,e,t,r);return e=h.v,t=h.w,Object.freeze(h),this.#c[d]=h,i(this.#d[t],e),i(this.#u[e],t),this.#s[t][d]=h,this.#h[e][d]=h,this.#g++,this}edge(e,t,r){var n=1===arguments.length?d(this.#e,arguments[0]):s(this.#e,e,t,r);return this.#l[n]}edgeAsObj(){const e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,r){var n=1===arguments.length?d(this.#e,arguments[0]):s(this.#e,e,t,r);return this.#l.hasOwnProperty(n)}removeEdge(e,t,r){var n=1===arguments.length?d(this.#e,arguments[0]):s(this.#e,e,t,r),o=this.#c[n];return o&&(e=o.v,t=o.w,delete this.#l[n],delete this.#c[n],a(this.#d[t],e),a(this.#u[e],t),delete this.#s[t][n],delete this.#h[e][n],this.#g--),this}inEdges(e,t){var r=this.#s[e];if(r){var n=Object.values(r);return t?n.filter((e=>e.v===t)):n}}outEdges(e,t){var r=this.#h[e];if(r){var n=Object.values(r);return t?n.filter((e=>e.w===t)):n}}nodeEdges(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}},u={Graph:h,version:"2.1.13"},c=h,l={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:f(e),edges:g(e)};void 0!==e.graph()&&(t.value=structuredClone(e.graph()));return t},read:function(e){var t=new c(e.options).setGraph(e.value);return e.nodes.forEach((function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),e.edges.forEach((function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}};function f(e){return e.nodes().map((function(t){var r=e.node(t),n=e.parent(t),o={v:t};return void 0!==r&&(o.value=r),void 0!==n&&(o.parent=n),o}))}function g(e){return e.edges().map((function(t){var r=e.edge(t),n={v:t.v,w:t.w};return void 0!==t.name&&(n.name=t.name),void 0!==r&&(n.value=r),n}))}var p=function(e){var t,r={},n=[];function o(n){r.hasOwnProperty(n)||(r[n]=!0,t.push(n),e.successors(n).forEach(o),e.predecessors(n).forEach(o))}return e.nodes().forEach((function(e){t=[],o(e),t.length&&n.push(t)})),n};var v=class{#w=[];#E={};size(){return this.#w.length}keys(){return this.#w.map((function(e){return e.key}))}has(e){return this.#E.hasOwnProperty(e)}priority(e){var t=this.#E[e];if(void 0!==t)return this.#w[t].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this.#w[0].key}add(e,t){var r=this.#E;if(e=String(e),!r.hasOwnProperty(e)){var n=this.#w,o=n.length;return r[e]=o,n.push({key:e,priority:t}),this.#y(o),!0}return!1}removeMin(){this.#b(0,this.#w.length-1);var e=this.#w.pop();return delete this.#E[e.key],this.#k(0),e.key}decrease(e,t){var r=this.#E[e];if(t>this.#w[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this.#w[r].priority+" New: "+t);this.#w[r].priority=t,this.#y(r)}#k(e){var t=this.#w,r=2*e,n=r+1,o=e;r<t.length&&(o=t[r].priority<t[o].priority?r:o,n<t.length&&(o=t[n].priority<t[o].priority?n:o),o!==e&&(this.#b(e,o),this.#k(o)))}#y(e){for(var t,r=this.#w,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this.#b(e,t),e=t}#b(e,t){var r=this.#w,n=this.#E,o=r[e],i=r[t];r[e]=i,r[t]=o,n[i.key]=e,n[o.key]=t}},m=v,w=function(e,t,r,n){return function(e,t,r,n){var o,i,a={},s=new m,d=function(e){var t=e.v!==o?e.v:e.w,n=a[t],d=r(e),h=i.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+d);h<n.distance&&(n.distance=h,n.predecessor=o,s.decrease(t,h))};e.nodes().forEach((function(e){var r=e===t?0:Number.POSITIVE_INFINITY;a[e]={distance:r},s.add(e,r)}));for(;s.size()>0&&(o=s.removeMin(),(i=a[o]).distance!==Number.POSITIVE_INFINITY);)n(o).forEach(d);return a}(e,String(t),r||E,n||function(t){return e.outEdges(t)})},E=()=>1;var y=w,b=function(e,t,r){return e.nodes().reduce((function(n,o){return n[o]=y(e,o,t,r),n}),{})};var k=function(e){var t=0,r=[],n={},o=[];function i(a){var s=n[a]={onStack:!0,lowlink:t,index:t++};if(r.push(a),e.successors(a).forEach((function(e){n.hasOwnProperty(e)?n[e].onStack&&(s.lowlink=Math.min(s.lowlink,n[e].index)):(i(e),s.lowlink=Math.min(s.lowlink,n[e].lowlink))})),s.lowlink===s.index){var d,h=[];do{d=r.pop(),n[d].onStack=!1,h.push(d)}while(a!==d);o.push(h)}}return e.nodes().forEach((function(e){n.hasOwnProperty(e)||i(e)})),o};var x=k,N=function(e){return x(e).filter((function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))};var O=function(e,t,r){return function(e,t,r){var n={},o=e.nodes();return o.forEach((function(e){n[e]={},n[e][e]={distance:0},o.forEach((function(t){e!==t&&(n[e][t]={distance:Number.POSITIVE_INFINITY})})),r(e).forEach((function(r){var o=r.v===e?r.w:r.v,i=t(r);n[e][o]={distance:i,predecessor:e}}))})),o.forEach((function(e){var t=n[e];o.forEach((function(r){var i=n[r];o.forEach((function(r){var n=i[e],o=t[r],a=i[r],s=n.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)}))}))})),n}(e,t||I,r||function(t){return e.outEdges(t)})},I=()=>1;function P(e){var t={},r={},n=[];if(e.sinks().forEach((function o(i){if(r.hasOwnProperty(i))throw new j;t.hasOwnProperty(i)||(r[i]=!0,t[i]=!0,e.predecessors(i).forEach(o),delete r[i],n.push(i))})),Object.keys(t).length!==e.nodeCount())throw new j;return n}class j extends Error{constructor(){super(...arguments)}}var M=P;P.CycleException=j;var C=M;var L=function(e,t,r){Array.isArray(t)||(t=[t]);var n=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),o="post"===r?_:T,i=[],a={};return t.forEach((t=>{if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);o(t,n,a,i)})),i};function _(e,t,r,n){for(var o=[[e,!1]];o.length>0;){var i=o.pop();i[1]?n.push(i[0]):r.hasOwnProperty(i[0])||(r[i[0]]=!0,o.push([i[0],!0]),R(t(i[0]),(e=>o.push([e,!1]))))}}function T(e,t,r,n){for(var o=[e];o.length>0;){var i=o.pop();r.hasOwnProperty(i)||(r[i]=!0,n.push(i),R(t(i),(e=>o.push(e))))}}function R(e,t){for(var r=e.length;r--;)t(e[r],r,e);return e}var S=L;var D=L;var F=h,G=v;var V={Graph:u.Graph,json:l,alg:{components:p,dijkstra:w,dijkstraAll:b,findCycles:N,floydWarshall:O,isAcyclic:function(e){try{C(e)}catch(e){if(e instanceof C.CycleException)return!1;throw e}return!0},postorder:function(e,t){return S(e,t,"post")},preorder:function(e,t){return D(e,t,"pre")},prim:function(e,t){var r,n=new F,o={},i=new G;function a(e){var n=e.v===r?e.w:e.v,a=i.priority(n);if(void 0!==a){var s=t(e);s<a&&(o[n]=r,i.decrease(n,s))}}if(0===e.nodeCount())return n;e.nodes().forEach((function(e){i.add(e,Number.POSITIVE_INFINITY),n.setNode(e)})),i.decrease(e.nodes()[0],0);var s=!1;for(;i.size()>0;){if(r=i.removeMin(),o.hasOwnProperty(r))n.setEdge(r,o[r]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(r).forEach(a)}return n},tarjan:k,topsort:M},version:u.version};function B(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Y(e,t){if("_next"!==e&&"_prev"!==e)return t}let z=V.Graph,A=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return B(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&B(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,r=t._prev;for(;r!==t;)e.push(JSON.stringify(r,Y)),r=r._prev;return"["+e.join(", ")+"]"}};var q=function(e,t){if(e.nodeCount()<=1)return[];let r=function(e,t){let r=new z,n=0,o=0;e.nodes().forEach((e=>{r.setNode(e,{v:e,in:0,out:0})})),e.edges().forEach((e=>{let i=r.edge(e.v,e.w)||0,a=t(e),s=i+a;r.setEdge(e.v,e.w,s),o=Math.max(o,r.node(e.v).out+=a),n=Math.max(n,r.node(e.w).in+=a)}));let i=function(e){const t=[];for(let r=0;r<e;r++)t.push(r);return t}(o+n+3).map((()=>new A)),a=n+1;return r.nodes().forEach((e=>{J(i,a,r.node(e))})),{graph:r,buckets:i,zeroIdx:a}}(e,t||W);return function(e,t,r){let n,o=[],i=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;n=a.dequeue();)U(e,t,r,n);for(;n=i.dequeue();)U(e,t,r,n);if(e.nodeCount())for(let i=t.length-2;i>0;--i)if(n=t[i].dequeue(),n){o=o.concat(U(e,t,r,n,!0));break}}return o}(r.graph,r.buckets,r.zeroIdx).flatMap((t=>e.outEdges(t.v,t.w)))};let W=()=>1;function U(e,t,r,n,o){let i=o?[]:void 0;return e.inEdges(n.v).forEach((n=>{let a=e.edge(n),s=e.node(n.v);o&&i.push({v:n.v,w:n.w}),s.out-=a,J(t,r,s)})),e.outEdges(n.v).forEach((n=>{let o=e.edge(n),i=n.w,a=e.node(i);a.in-=o,J(t,r,a)})),e.removeNode(n.v),i}function J(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}let K=V.Graph;var Q={addBorderNode:function(e,t,r,n){let o={width:0,height:0};arguments.length>=4&&(o.rank=r,o.order=n);return X(e,"border",o,t)},addDummyNode:X,asNonCompoundGraph:function(e){let t=new K({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach((r=>{e.children(r).length||t.setNode(r,e.node(r))})),e.edges().forEach((r=>{t.setEdge(r,e.edge(r))})),t},buildLayerMatrix:function(e){let t=ee(H(e)+1).map((()=>[]));return e.nodes().forEach((r=>{let n=e.node(r),o=n.rank;void 0!==o&&(t[o][n.order]=r)})),t},intersectRect:function(e,t){let r,n,o=e.x,i=e.y,a=t.x-o,s=t.y-i,d=e.width/2,h=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*d>Math.abs(a)*h?(s<0&&(h=-h),r=h*a/s,n=h):(a<0&&(d=-d),r=d,n=d*s/a);return{x:o+r,y:i+n}},mapValues:function(e,t){let r=t;"string"==typeof t&&(r=e=>e[t]);return Object.entries(e).reduce(((e,[t,n])=>(e[t]=r(n,t),e)),{})},maxRank:H,normalizeRanks:function(e){let t=Math.min(...e.nodes().map((t=>{let r=e.node(t).rank;return void 0===r?Number.MAX_VALUE:r})));e.nodes().forEach((r=>{let n=e.node(r);n.hasOwnProperty("rank")&&(n.rank-=t)}))},notime:function(e,t){return t()},partition:function(e,t){let r={lhs:[],rhs:[]};return e.forEach((e=>{t(e)?r.lhs.push(e):r.rhs.push(e)})),r},pick:function(e,t){const r={};for(const n of t)void 0!==e[n]&&(r[n]=e[n]);return r},predecessorWeights:function(e){let t=e.nodes().map((t=>{let r={};return e.inEdges(t).forEach((t=>{r[t.v]=(r[t.v]||0)+e.edge(t).weight})),r}));return te(e.nodes(),t)},range:ee,removeEmptyRanks:function(e){let t=Math.min(...e.nodes().map((t=>e.node(t).rank))),r=[];e.nodes().forEach((n=>{let o=e.node(n).rank-t;r[o]||(r[o]=[]),r[o].push(n)}));let n=0,o=e.graph().nodeRankFactor;Array.from(r).forEach(((t,r)=>{void 0===t&&r%o!=0?--n:void 0!==t&&n&&t.forEach((t=>e.node(t).rank+=n))}))},simplify:function(e){let t=(new K).setGraph(e.graph());return e.nodes().forEach((r=>t.setNode(r,e.node(r)))),e.edges().forEach((r=>{let n=t.edge(r.v,r.w)||{weight:0,minlen:1},o=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})})),t},successorWeights:function(e){let t=e.nodes().map((t=>{let r={};return e.outEdges(t).forEach((t=>{r[t.w]=(r[t.w]||0)+e.edge(t).weight})),r}));return te(e.nodes(),t)},time:function(e,t){let r=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-r)+"ms")}},uniqueId:$,zipObject:te};function X(e,t,r,n){let o;do{o=$(n)}while(e.hasNode(o));return r.dummy=t,e.setNode(o,r),o}function H(e){return Math.max(...e.nodes().map((t=>{let r=e.node(t).rank;return void 0===r?Number.MIN_VALUE:r})))}let Z=0;function $(e){var t=++Z;return toString(e)+t}function ee(e,t,r=1){null==t&&(t=e,e=0);let n=e=>e<t;r<0&&(n=e=>t<e);const o=[];for(let t=e;n(t);t+=r)o.push(t);return o}function te(e,t){return e.reduce(((e,r,n)=>(e[r]=t[n],e)),{})}let re=q,ne=Q.uniqueId;var oe={run:function(e){("greedy"===e.graph().acyclicer?re(e,function(e){return t=>e.edge(t).weight}(e)):function(e){let t=[],r={},n={};function o(i){n.hasOwnProperty(i)||(n[i]=!0,r[i]=!0,e.outEdges(i).forEach((e=>{r.hasOwnProperty(e.w)?t.push(e):o(e.w)})),delete r[i])}return e.nodes().forEach(o),t}(e)).forEach((t=>{let r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,ne("rev"))}))},undo:function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.reversed){e.removeEdge(t);let n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}}))}};let ie=Q;var ae={run:function(e){e.graph().dummyChains=[],e.edges().forEach((t=>function(e,t){let r,n,o,i=t.v,a=e.node(i).rank,s=t.w,d=e.node(s).rank,h=t.name,u=e.edge(t),c=u.labelRank;if(d===a+1)return;for(e.removeEdge(t),o=0,++a;a<d;++o,++a)u.points=[],n={width:0,height:0,edgeLabel:u,edgeObj:t,rank:a},r=ie.addDummyNode(e,"edge",n,"_d"),a===c&&(n.width=u.width,n.height=u.height,n.dummy="edge-label",n.labelpos=u.labelpos),e.setEdge(i,r,{weight:u.weight},h),0===o&&e.graph().dummyChains.push(r),i=r;e.setEdge(i,s,{weight:u.weight},h)}(e,t)))},undo:function(e){e.graph().dummyChains.forEach((t=>{let r,n=e.node(t),o=n.edgeLabel;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)}))}};var se={longestPath:function(e){var t={};e.sources().forEach((function r(n){var o=e.node(n);if(t.hasOwnProperty(n))return o.rank;t[n]=!0;var i=Math.min(...e.outEdges(n).map((t=>null==t?Number.POSITIVE_INFINITY:r(t.w)-e.edge(t).minlen)));return i===Number.POSITIVE_INFINITY&&(i=0),o.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}};var de=V.Graph,he=se.slack,ue=function(e){var t,r,n=new de({directed:!1}),o=e.nodes()[0],i=e.nodeCount();n.setNode(o,{});for(;ce(n,e)<i;)t=le(n,e),r=n.hasNode(t.v)?he(e,t):-he(e,t),fe(n,e,r);return n};function ce(e,t){return e.nodes().forEach((function r(n){t.nodeEdges(n).forEach((o=>{var i=o.v,a=n===i?o.w:i;e.hasNode(a)||he(t,o)||(e.setNode(a,{}),e.setEdge(n,a,{}),r(a))}))})),e.nodeCount()}function le(e,t){return t.edges().reduce(((r,n)=>{let o=Number.POSITIVE_INFINITY;return e.hasNode(n.v)!==e.hasNode(n.w)&&(o=he(t,n)),o<r[0]?[o,n]:r}),[Number.POSITIVE_INFINITY,null])[1]}function fe(e,t,r){e.nodes().forEach((e=>t.node(e).rank+=r))}var ge=ue,pe=se.slack,ve=se.longestPath,me=V.alg.preorder,we=V.alg.postorder,Ee=Q.simplify,ye=be;function be(e){e=Ee(e),ve(e);var t,r=ge(e);for(Ne(r),ke(r,e);t=Ie(r);)je(r,e,t,Pe(r,e,t))}function ke(e,t){var r=we(e,e.nodes());(r=r.slice(0,r.length-1)).forEach((r=>function(e,t,r){var n=e.node(r),o=n.parent;e.edge(r,o).cutvalue=xe(e,t,r)}(e,t,r)))}function xe(e,t,r){var n=e.node(r).parent,o=!0,i=t.edge(r,n),a=0;return i||(o=!1,i=t.edge(n,r)),a=i.weight,t.nodeEdges(r).forEach((i=>{var s,d,h=i.v===r,u=h?i.w:i.v;if(u!==n){var c=h===o,l=t.edge(i).weight;if(a+=c?l:-l,s=r,d=u,e.hasEdge(s,d)){var f=e.edge(r,u).cutvalue;a+=c?-f:f}}})),a}function Ne(e,t){arguments.length<2&&(t=e.nodes()[0]),Oe(e,{},1,t)}function Oe(e,t,r,n,o){var i=r,a=e.node(n);return t[n]=!0,e.neighbors(n).forEach((o=>{t.hasOwnProperty(o)||(r=Oe(e,t,r,o,n))})),a.low=i,a.lim=r++,o?a.parent=o:delete a.parent,r}function Ie(e){return e.edges().find((t=>e.edge(t).cutvalue<0))}function Pe(e,t,r){var n=r.v,o=r.w;t.hasEdge(n,o)||(n=r.w,o=r.v);var i=e.node(n),a=e.node(o),s=i,d=!1;i.lim>a.lim&&(s=a,d=!0);var h=t.edges().filter((t=>d===Me(e,e.node(t.v),s)&&d!==Me(e,e.node(t.w),s)));return h.reduce(((e,r)=>pe(t,r)<pe(t,e)?r:e))}function je(e,t,r,n){var o=r.v,i=r.w;e.removeEdge(o,i),e.setEdge(n.v,n.w,{}),Ne(e),ke(e,t),function(e,t){var r=e.nodes().find((e=>!t.node(e).parent)),n=me(e,r);(n=n.slice(1)).forEach((r=>{var n=e.node(r).parent,o=t.edge(r,n),i=!1;o||(o=t.edge(n,r),i=!0),t.node(r).rank=t.node(n).rank+(i?o.minlen:-o.minlen)}))}(e,t)}function Me(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}be.initLowLimValues=Ne,be.initCutValues=ke,be.calcCutValue=xe,be.leaveEdge=Ie,be.enterEdge=Pe,be.exchangeEdges=je;var Ce=se.longestPath,Le=ue,_e=ye,Te=function(e){switch(e.graph().ranker){case"network-simplex":default:Se(e);break;case"tight-tree":!function(e){Ce(e),Le(e)}(e);break;case"longest-path":Re(e)}};var Re=Ce;function Se(e){_e(e)}var De=function(e){let t=function(e){let t={},r=0;function n(o){let i=r;e.children(o).forEach(n),t[o]={low:i,lim:r++}}return e.children().forEach(n),t}(e);e.graph().dummyChains.forEach((r=>{let n=e.node(r),o=n.edgeObj,i=function(e,t,r,n){let o,i,a=[],s=[],d=Math.min(t[r].low,t[n].low),h=Math.max(t[r].lim,t[n].lim);o=r;do{o=e.parent(o),a.push(o)}while(o&&(t[o].low>d||h>t[o].lim));i=o,o=n;for(;(o=e.parent(o))!==i;)s.push(o);return{path:a.concat(s.reverse()),lca:i}}(e,t,o.v,o.w),a=i.path,s=i.lca,d=0,h=a[d],u=!0;for(;r!==o.w;){if(n=e.node(r),u){for(;(h=a[d])!==s&&e.node(h).maxRank<n.rank;)d++;h===s&&(u=!1)}if(!u){for(;d<a.length-1&&e.node(h=a[d+1]).minRank<=n.rank;)d++;h=a[d]}e.setParent(r,h),r=e.successors(r)[0]}}))};let Fe=Q;var Ge={run:function(e){let t=Fe.addDummyNode(e,"root",{},"_root"),r=function(e){var t={};function r(n,o){var i=e.children(n);i&&i.length&&i.forEach((e=>r(e,o+1))),t[n]=o}return e.children().forEach((e=>r(e,1))),t}(e),n=Math.max(...Object.values(r))-1,o=2*n+1;e.graph().nestingRoot=t,e.edges().forEach((t=>e.edge(t).minlen*=o));let i=function(e){return e.edges().reduce(((t,r)=>t+e.edge(r).weight),0)}(e)+1;e.children().forEach((a=>Ve(e,t,o,i,n,r,a))),e.graph().nodeRankFactor=o},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach((t=>{e.edge(t).nestingEdge&&e.removeEdge(t)}))}};function Ve(e,t,r,n,o,i,a){let s=e.children(a);if(!s.length)return void(a!==t&&e.setEdge(t,a,{weight:0,minlen:r}));let d=Fe.addBorderNode(e,"_bt"),h=Fe.addBorderNode(e,"_bb"),u=e.node(a);e.setParent(d,a),u.borderTop=d,e.setParent(h,a),u.borderBottom=h,s.forEach((s=>{Ve(e,t,r,n,o,i,s);let u=e.node(s),c=u.borderTop?u.borderTop:s,l=u.borderBottom?u.borderBottom:s,f=u.borderTop?n:2*n,g=c!==l?1:o-i[a]+1;e.setEdge(d,c,{weight:f,minlen:g,nestingEdge:!0}),e.setEdge(l,h,{weight:f,minlen:g,nestingEdge:!0})})),e.parent(a)||e.setEdge(t,d,{weight:0,minlen:o+i[a]})}let Be=Q;var Ye=function(e){e.children().forEach((function t(r){let n=e.children(r),o=e.node(r);if(n.length&&n.forEach(t),o.hasOwnProperty("minRank")){o.borderLeft=[],o.borderRight=[];for(let t=o.minRank,n=o.maxRank+1;t<n;++t)ze(e,"borderLeft","_bl",r,o,t),ze(e,"borderRight","_br",r,o,t)}}))};function ze(e,t,r,n,o,i){let a={width:0,height:0,rank:i,borderType:t},s=o[t][i-1],d=Be.addDummyNode(e,"border",a,r);o[t][i]=d,e.setParent(d,n),s&&e.setEdge(s,d,{weight:1})}function Ae(e){e.nodes().forEach((t=>qe(e.node(t)))),e.edges().forEach((t=>qe(e.edge(t))))}function qe(e){let t=e.width;e.width=e.height,e.height=t}function We(e){e.y=-e.y}function Ue(e){let t=e.x;e.x=e.y,e.y=t}let Je=Q;var Ke=function(e){let t={},r=e.nodes().filter((t=>!e.children(t).length)),n=Math.max(...r.map((t=>e.node(t).rank))),o=Je.range(n+1).map((()=>[]));function i(r){if(t[r])return;t[r]=!0;let n=e.node(r);o[n.rank].push(r),e.successors(r).forEach(i)}return r.sort(((t,r)=>e.node(t).rank-e.node(r).rank)).forEach(i),o};let Qe=Q.zipObject;function Xe(e,t,r){let n=Qe(r,r.map(((e,t)=>t))),o=t.flatMap((t=>e.outEdges(t).map((t=>({pos:n[t.w],weight:e.edge(t).weight}))).sort(((e,t)=>e.pos-t.pos)))),i=1;for(;i<r.length;)i<<=1;let a=2*i-1;i-=1;let s=new Array(a).fill(0),d=0;return o.forEach((e=>{let t=e.pos+i;s[t]+=e.weight;let r=0;for(;t>0;)t%2&&(r+=s[t+1]),t=t-1>>1,s[t]+=e.weight;d+=e.weight*r})),d}let He=Q;let Ze=Q;function $e(e,t,r){let n;for(;t.length&&(n=t[t.length-1]).i<=r;)t.pop(),e.push(n.vs),r++;return r}let et=function(e,t=[]){return t.map((t=>{let r=e.inEdges(t);if(r.length){let n=r.reduce(((t,r)=>{let n=e.edge(r),o=e.node(r.v);return{sum:t.sum+n.weight*o.order,weight:t.weight+n.weight}}),{sum:0,weight:0});return{v:t,barycenter:n.sum/n.weight,weight:n.weight}}return{v:t}}))},tt=function(e,t){let r={};return e.forEach(((e,t)=>{let n=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(n.barycenter=e.barycenter,n.weight=e.weight)})),t.edges().forEach((e=>{let t=r[e.v],n=r[e.w];void 0!==t&&void 0!==n&&(n.indegree++,t.out.push(r[e.w]))})),function(e){let t=[];function r(e){return t=>{t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight);t.weight&&(r+=t.barycenter*t.weight,n+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function n(t){return r=>{r.in.push(t),0==--r.indegree&&e.push(r)}}for(;e.length;){let o=e.pop();t.push(o),o.in.reverse().forEach(r(o)),o.out.forEach(n(o))}return t.filter((e=>!e.merged)).map((e=>He.pick(e,["vs","i","barycenter","weight"])))}(Object.values(r).filter((e=>!e.indegree)))},rt=function(e,t){let r=Ze.partition(e,(e=>e.hasOwnProperty("barycenter"))),n=r.lhs,o=r.rhs.sort(((e,t)=>t.i-e.i)),i=[],a=0,s=0,d=0;n.sort((h=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:h?t.i-e.i:e.i-t.i)),d=$e(i,o,d),n.forEach((e=>{d+=e.vs.length,i.push(e.vs),a+=e.barycenter*e.weight,s+=e.weight,d=$e(i,o,d)}));var h;let u={vs:i.flat(!0)};s&&(u.barycenter=a/s,u.weight=s);return u};var nt=function e(t,r,n,o){let i=t.children(r),a=t.node(r),s=a?a.borderLeft:void 0,d=a?a.borderRight:void 0,h={};s&&(i=i.filter((e=>e!==s&&e!==d)));let u=et(t,i);u.forEach((r=>{if(t.children(r.v).length){let s=e(t,r.v,n,o);h[r.v]=s,s.hasOwnProperty("barycenter")&&(a=s,void 0!==(i=r).barycenter?(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight):(i.barycenter=a.barycenter,i.weight=a.weight))}var i,a}));let c=tt(u,n);!function(e,t){e.forEach((e=>{e.vs=e.vs.flatMap((e=>t[e]?t[e].vs:e))}))}(c,h);let l=rt(c,o);if(s&&(l.vs=[s,l.vs,d].flat(!0),t.predecessors(s).length)){let e=t.node(t.predecessors(s)[0]),r=t.node(t.predecessors(d)[0]);l.hasOwnProperty("barycenter")||(l.barycenter=0,l.weight=0),l.barycenter=(l.barycenter*l.weight+e.order+r.order)/(l.weight+2),l.weight+=2}return l};let ot=V.Graph,it=Q;var at=function(e,t,r){let n=function(e){var t;for(;e.hasNode(t=it.uniqueId("_root")););return t}(e),o=new ot({compound:!0}).setGraph({root:n}).setDefaultNodeLabel((t=>e.node(t)));return e.nodes().forEach((i=>{let a=e.node(i),s=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(o.setNode(i),o.setParent(i,s||n),e[r](i).forEach((t=>{let r=t.v===i?t.w:t.v,n=o.edge(r,i),a=void 0!==n?n.weight:0;o.setEdge(r,i,{weight:e.edge(t).weight+a})})),a.hasOwnProperty("minRank")&&o.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))})),o};let st=Ke,dt=function(e,t){let r=0;for(let n=1;n<t.length;++n)r+=Xe(e,t[n-1],t[n]);return r},ht=nt,ut=at,ct=function(e,t,r){let n,o={};r.forEach((r=>{let i,a,s=e.parent(r);for(;s;){if(i=e.parent(s),i?(a=o[i],o[i]=s):(a=n,n=s),a&&a!==s)return void t.setEdge(a,s);s=i}}))},lt=V.Graph,ft=Q;var gt=function(e){let t=ft.maxRank(e),r=pt(e,ft.range(1,t+1),"inEdges"),n=pt(e,ft.range(t-1,-1,-1),"outEdges"),o=st(e);mt(e,o);let i,a=Number.POSITIVE_INFINITY;for(let t=0,s=0;s<4;++t,++s){vt(t%2?r:n,t%4>=2),o=ft.buildLayerMatrix(e);let d=dt(e,o);d<a&&(s=0,i=Object.assign({},o),a=d)}mt(e,i)};function pt(e,t,r){return t.map((function(t){return ut(e,t,r)}))}function vt(e,t){let r=new lt;e.forEach((function(e){let n=e.graph().root,o=ht(e,n,r,t);o.vs.forEach(((t,r)=>e.node(t).order=r)),ct(e,r,o.vs)}))}function mt(e,t){Object.values(t).forEach((t=>t.forEach(((t,r)=>e.node(t).order=r))))}let wt=V.Graph,Et=Q;var yt=function(e){let t,r=Et.buildLayerMatrix(e),n=Object.assign(bt(e,r),kt(e,r)),o={};["u","d"].forEach((i=>{t="u"===i?r:Object.values(r).reverse(),["l","r"].forEach((r=>{"r"===r&&(t=t.map((e=>Object.values(e).reverse())));let a=("u"===i?e.predecessors:e.successors).bind(e),s=Ot(e,t,n,a),d=It(e,t,s.root,s.align,"r"===r);"r"===r&&(d=Et.mapValues(d,(e=>-e))),o[i+r]=d}))}));let i=Pt(e,o);return jt(o,i),Mt(o,e.graph().align)};function bt(e,t){let r={};return t.reduce((function(t,n){let o=0,i=0,a=t.length,s=n[n.length-1];return n.forEach(((t,d)=>{let h=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find((t=>e.node(t).dummy))}(e,t),u=h?e.node(h).order:a;(h||t===s)&&(n.slice(i,d+1).forEach((t=>{e.predecessors(t).forEach((n=>{let i=e.node(n),a=i.order;!(a<o||u<a)||i.dummy&&e.node(t).dummy||xt(r,n,t)}))})),i=d+1,o=u)})),n})),r}function kt(e,t){let r={};function n(t,n,o,i,a){let s;Et.range(n,o).forEach((n=>{s=t[n],e.node(s).dummy&&e.predecessors(s).forEach((t=>{let n=e.node(t);n.dummy&&(n.order<i||n.order>a)&&xt(r,t,s)}))}))}return t.reduce((function(t,r){let o,i=-1,a=0;return r.forEach(((s,d)=>{if("border"===e.node(s).dummy){let t=e.predecessors(s);t.length&&(o=e.node(t[0]).order,n(r,a,d,i,o),a=d,i=o)}n(r,a,r.length,o,t.length)})),r})),r}function xt(e,t,r){if(t>r){let e=t;t=r,r=e}let n=e[t];n||(e[t]=n={}),n[r]=!0}function Nt(e,t,r){if(t>r){let e=t;t=r,r=e}return!!e[t]&&e[t].hasOwnProperty(r)}function Ot(e,t,r,n){let o={},i={},a={};return t.forEach((e=>{e.forEach(((e,t)=>{o[e]=e,i[e]=e,a[e]=t}))})),t.forEach((e=>{let t=-1;e.forEach((e=>{let s=n(e);if(s.length){s=s.sort(((e,t)=>a[e]-a[t]));let n=(s.length-1)/2;for(let d=Math.floor(n),h=Math.ceil(n);d<=h;++d){let n=s[d];i[e]===e&&t<a[n]&&!Nt(r,e,n)&&(i[n]=e,i[e]=o[e]=o[n],t=a[n])}}}))})),{root:o,align:i}}function It(e,t,r,n,o){let i={},a=function(e,t,r,n){let o=new wt,i=e.graph(),a=function(e,t,r){return(n,o,i)=>{let a,s=n.node(o),d=n.node(i),h=0;if(h+=s.width/2,s.hasOwnProperty("labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(h+=r?a:-a),a=0,h+=(s.dummy?t:e)/2,h+=(d.dummy?t:e)/2,h+=d.width/2,d.hasOwnProperty("labelpos"))switch(d.labelpos.toLowerCase()){case"l":a=d.width/2;break;case"r":a=-d.width/2}return a&&(h+=r?a:-a),a=0,h}}(i.nodesep,i.edgesep,n);return t.forEach((t=>{let n;t.forEach((t=>{let i=r[t];if(o.setNode(i),n){var s=r[n],d=o.edge(s,i);o.setEdge(s,i,Math.max(a(e,t,n),d||0))}n=t}))})),o}(e,t,r,o),s=o?"borderLeft":"borderRight";function d(e,t){let r=a.nodes(),n=r.pop(),o={};for(;n;)o[n]?e(n):(o[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return d((function(e){i[e]=a.inEdges(e).reduce(((e,t)=>Math.max(e,i[t.v]+a.edge(t))),0)}),a.predecessors.bind(a)),d((function(t){let r=a.outEdges(t).reduce(((e,t)=>Math.min(e,i[t.w]-a.edge(t))),Number.POSITIVE_INFINITY),n=e.node(t);r!==Number.POSITIVE_INFINITY&&n.borderType!==s&&(i[t]=Math.max(i[t],r))}),a.successors.bind(a)),Object.keys(n).forEach((e=>i[e]=i[r[e]])),i}function Pt(e,t){return Object.values(t).reduce(((t,r)=>{let n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach((([t,r])=>{let i=function(e,t){return e.node(t).width}(e,t)/2;n=Math.max(r+i,n),o=Math.min(r-i,o)}));const i=n-o;return i<t[0]&&(t=[i,r]),t}),[Number.POSITIVE_INFINITY,null])[1]}function jt(e,t){let r=Object.values(t),n=Math.min(...r),o=Math.max(...r);["u","d"].forEach((r=>{["l","r"].forEach((i=>{let a=r+i,s=e[a];if(s===t)return;let d=Object.values(s),h=n-Math.min(...d);"l"!==i&&(h=o-Math.max(...d)),h&&(e[a]=Et.mapValues(s,(e=>e+h)))}))}))}function Mt(e,t){return Et.mapValues(e.ul,((r,n)=>{if(t)return e[t.toLowerCase()][n];{let t=Object.values(e).map((e=>e[n])).sort(((e,t)=>e-t));return(t[1]+t[2])/2}}))}let Ct=Q,Lt=yt;let _t=oe,Tt=ae,Rt=Te,St=Q.normalizeRanks,Dt=De,Ft=Q.removeEmptyRanks,Gt=Ge,Vt=Ye,Bt={adjust:function(e){let t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||Ae(e)},undo:function(e){let t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){e.nodes().forEach((t=>We(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.points.forEach(We),r.hasOwnProperty("y")&&We(r)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){e.nodes().forEach((t=>Ue(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.points.forEach(Ue),r.hasOwnProperty("x")&&Ue(r)}))}(e),Ae(e))}},Yt=gt,zt=function(e){(function(e){let t=Ct.buildLayerMatrix(e),r=e.graph().ranksep,n=0;t.forEach((t=>{const o=t.reduce(((t,r)=>{const n=e.node(r).height;return t>n?t:n}),0);t.forEach((t=>e.node(t).y=n+o/2)),n+=o+r}))})(e=Ct.asNonCompoundGraph(e)),Object.entries(Lt(e)).forEach((([t,r])=>e.node(t).x=r))},At=Q,qt=V.Graph;var Wt=function(e,t){let r=t&&t.debugTiming?At.time:At.notime;r("layout",(()=>{let t=r("  buildLayoutGraph",(()=>function(e){let t=new qt({multigraph:!0,compound:!0}),r=tr(e.graph());return t.setGraph(Object.assign({},Jt,er(r,Ut),At.pick(r,Kt))),e.nodes().forEach((r=>{const n=er(tr(e.node(r)),Qt);Object.keys(Xt).forEach((e=>{void 0===n[e]&&(n[e]=Xt[e])})),t.setNode(r,n),t.setParent(r,e.parent(r))})),e.edges().forEach((r=>{let n=tr(e.edge(r));t.setEdge(r,Object.assign({},Zt,er(n,Ht),At.pick(n,$t)))})),t}(e)));r("  runLayout",(()=>function(e,t){t("    makeSpaceForEdgeLabels",(()=>function(e){let t=e.graph();t.ranksep/=2,e.edges().forEach((r=>{let n=e.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(e))),t("    removeSelfEdges",(()=>function(e){e.edges().forEach((t=>{if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e))),t("    acyclic",(()=>_t.run(e))),t("    nestingGraph.run",(()=>Gt.run(e))),t("    rank",(()=>Rt(At.asNonCompoundGraph(e)))),t("    injectEdgeLabelProxies",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.width&&r.height){let r=e.node(t.v),n={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};At.addDummyNode(e,"edge-proxy",n,"_ep")}}))}(e))),t("    removeEmptyRanks",(()=>Ft(e))),t("    nestingGraph.cleanup",(()=>Gt.cleanup(e))),t("    normalizeRanks",(()=>St(e))),t("    assignRankMinMax",(()=>function(e){let t=0;e.nodes().forEach((r=>{let n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Math.max(t,n.maxRank))})),e.graph().maxRank=t}(e))),t("    removeEdgeLabelProxies",(()=>function(e){e.nodes().forEach((t=>{let r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))}))}(e))),t("    normalize.run",(()=>Tt.run(e))),t("    parentDummyChains",(()=>Dt(e))),t("    addBorderSegments",(()=>Vt(e))),t("    order",(()=>Yt(e))),t("    insertSelfEdges",(()=>function(e){var t=At.buildLayerMatrix(e);t.forEach((t=>{var r=0;t.forEach(((t,n)=>{var o=e.node(t);o.order=n+r,(o.selfEdges||[]).forEach((t=>{At.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:n+ ++r,e:t.e,label:t.label},"_se")})),delete o.selfEdges}))}))}(e))),t("    adjustCoordinateSystem",(()=>Bt.adjust(e))),t("    position",(()=>zt(e))),t("    positionSelfEdges",(()=>function(e){e.nodes().forEach((t=>{var r=e.node(t);if("selfedge"===r.dummy){var n=e.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,s=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{x:o+a,y:i},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.label.x=r.x,r.label.y=r.y}}))}(e))),t("    removeBorderNodes",(()=>function(e){e.nodes().forEach((t=>{if(e.children(t).length){let r=e.node(t),n=e.node(r.borderTop),o=e.node(r.borderBottom),i=e.node(r.borderLeft[r.borderLeft.length-1]),a=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(a.x-i.x),r.height=Math.abs(o.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}})),e.nodes().forEach((t=>{"border"===e.node(t).dummy&&e.removeNode(t)}))}(e))),t("    normalize.undo",(()=>Tt.undo(e))),t("    fixupEdgeLabelCoords",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.hasOwnProperty("x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(e))),t("    undoCoordinateSystem",(()=>Bt.undo(e))),t("    translateGraph",(()=>function(e){let t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,o=0,i=e.graph(),a=i.marginx||0,s=i.marginy||0;function d(e){let i=e.x,a=e.y,s=e.width,d=e.height;t=Math.min(t,i-s/2),r=Math.max(r,i+s/2),n=Math.min(n,a-d/2),o=Math.max(o,a+d/2)}e.nodes().forEach((t=>d(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.hasOwnProperty("x")&&d(r)})),t-=a,n-=s,e.nodes().forEach((r=>{let o=e.node(r);o.x-=t,o.y-=n})),e.edges().forEach((r=>{let o=e.edge(r);o.points.forEach((e=>{e.x-=t,e.y-=n})),o.hasOwnProperty("x")&&(o.x-=t),o.hasOwnProperty("y")&&(o.y-=n)})),i.width=r-t+a,i.height=o-n+s}(e))),t("    assignNodeIntersects",(()=>function(e){e.edges().forEach((t=>{let r,n,o=e.edge(t),i=e.node(t.v),a=e.node(t.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift(At.intersectRect(i,r)),o.points.push(At.intersectRect(a,n))}))}(e))),t("    reversePoints",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);r.reversed&&r.points.reverse()}))}(e))),t("    acyclic.undo",(()=>_t.undo(e)))}(t,r))),r("  updateInputGraph",(()=>function(e,t){e.nodes().forEach((r=>{let n=e.node(r),o=t.node(r);n&&(n.x=o.x,n.y=o.y,n.rank=o.rank,t.children(r).length&&(n.width=o.width,n.height=o.height))})),e.edges().forEach((r=>{let n=e.edge(r),o=t.edge(r);n.points=o.points,o.hasOwnProperty("x")&&(n.x=o.x,n.y=o.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)))}))};let Ut=["nodesep","edgesep","ranksep","marginx","marginy"],Jt={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Kt=["acyclicer","ranker","rankdir","align"],Qt=["width","height"],Xt={width:0,height:0},Ht=["minlen","weight","width","height","labeloffset"],Zt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},$t=["labelpos"];function er(e,t){return At.mapValues(At.pick(e,t),Number)}function tr(e){var t={};return e&&Object.entries(e).forEach((([e,r])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=r})),t}let rr=Q,nr=V.Graph;var or={graphlib:V,layout:Wt,debug:{debugOrdering:function(e){let t=rr.buildLayerMatrix(e),r=new nr({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach((t=>{r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)})),e.edges().forEach((e=>r.setEdge(e.v,e.w,{},e.name))),t.forEach(((e,t)=>{let n="layer"+t;r.setNode(n,{rank:"same"}),e.reduce(((e,t)=>(r.setEdge(e,t,{style:"invis"}),t)))})),r}},util:{time:Q.time,notime:Q.notime},version:"1.0.4"};const ir=function(e){return"function"==typeof e};function ar(r){this.options=t({},e,r)}function sr(e){e&&e("layout","dagre",ar)}ar.prototype.run=function(){let e=this.options,t=e.cy,r=e.eles,n=function(e,t){return ir(t)?t.apply(e,[e]):t},o=e.boundingBox||{x1:0,y1:0,w:t.width(),h:t.height()};void 0===o.x2&&(o.x2=o.x1+o.w),void 0===o.w&&(o.w=o.x2-o.x1),void 0===o.y2&&(o.y2=o.y1+o.h),void 0===o.h&&(o.h=o.y2-o.y1);let i=new or.graphlib.Graph({multigraph:!0,compound:!0}),a={},s=function(e,t){null!=t&&(a[e]=t)};s("nodesep",e.nodeSep),s("edgesep",e.edgeSep),s("ranksep",e.rankSep),s("rankdir",e.rankDir),s("align",e.align),s("ranker",e.ranker),s("acyclicer",e.acyclicer),i.setGraph(a),i.setDefaultEdgeLabel((function(){return{}})),i.setDefaultNodeLabel((function(){return{}}));let d=r.nodes();ir(e.sort)&&(d=d.sort(e.sort));for(let t=0;t<d.length;t++){let r=d[t],n=r.layoutDimensions(e);i.setNode(r.id(),{width:n.w,height:n.h,name:r.id()})}for(let e=0;e<d.length;e++){let t=d[e];t.isChild()&&i.setParent(t.id(),t.parent().id())}let h=r.edges().stdFilter((function(e){return!e.source().isParent()&&!e.target().isParent()}));ir(e.sort)&&(h=h.sort(e.sort));for(let t=0;t<h.length;t++){let r=h[t];i.setEdge(r.source().id(),r.target().id(),{minlen:n(r,e.minLen),weight:n(r,e.edgeWeight),name:r.id()},r.id())}or.layout(i);let u,c=i.nodes();for(let e=0;e<c.length;e++){let r=c[e],n=i.node(r);t.getElementById(r).scratch().dagre=n}e.boundingBox?(u={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},d.forEach((function(e){let t=e.scratch().dagre;u.x1=Math.min(u.x1,t.x),u.x2=Math.max(u.x2,t.x),u.y1=Math.min(u.y1,t.y),u.y2=Math.max(u.y2,t.y)})),u.w=u.x2-u.x1,u.h=u.y2-u.y1):u=o;return d.layoutPositions(this,e,(function(t){let r=(t="object"==typeof t?t:this).scratch().dagre;return function(t){if(e.boundingBox){let e=0===u.w?0:(t.x-u.x1)/u.w,r=0===u.h?0:(t.y-u.y1)/u.h;return{x:o.x1+e*o.w,y:o.y1+r*o.h}}return t}({x:r.x,y:r.y})})),this},"undefined"!=typeof cytoscape&&sr(cytoscape);export{sr as default};
